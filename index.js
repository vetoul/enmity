(()=>{function e(e){return e&&e.__esModule?e.default:e}function o(e,o,n){window.enmity.settings.set(e,o,n)}let{components:n}=window.enmity;n.Alert,n.Button,n.FlatList,n.Image,n.ImageBackground,n.KeyboardAvoidingView,n.Modal,n.Pressable,n.RefreshControl,n.ScrollView,n.SectionList,n.StatusBar,n.StyleSheet,n.Switch,n.Text,n.TextInput,n.TouchableHighlight,n.TouchableOpacity,n.TouchableWithoutFeedback,n.Touchable,n.View,n.VirtualizedList,n.Form,n.FormArrow,n.FormCTA,n.FormCTAButton,n.FormCardSection,n.FormCheckbox;let t=n.FormDivider;n.FormHint,n.FormIcon;let r=n.FormInput;n.FormLabel,n.FormRadio;let l=n.FormRow,a=n.FormSection;n.FormSelect,n.FormSubLabel;let i=n.FormSwitch;function c(...e){return window.enmity.modules.getByProps(...e)}n.FormTernaryCheckBox,n.FormText,n.FormTextColors,n.FormTextSizes,window.enmity.modules.common;let s=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;let m=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher;let u=window.enmity.modules.common.Storage,d=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings;let g=window.enmity.modules.common.Users;window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;let w=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;var h,y,f={};f=JSON.parse('{"name":"Message Logger","version":"3.5.15","build":"patch-1.0.14","description":"PLs work","authors":[{"name":"vet","id":"305188557843070977"}],"color":"#000000","sourceUrl":"https://raw.githubusercontent.com/vetoul/enmity/refs/heads/main/index.js"}');var b=function(){return(b=Object.assign||function(e){for(var o,n=1,t=arguments.length;n<t;n++)for(var r in o=arguments[n])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e}).apply(this,arguments)},p=function(e,o){var n,t,r,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(c){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(l=0)),l;)try{if(n=1,t&&(r=2&i[0]?t.return:i[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,i[1])).done)return r;switch(t=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,t=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=o.call(e,l)}catch(e){i=[6,e],t=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};w.createThemedStyleSheet({icon:{color:s.ThemeColorMap.INTERACTIVE_NORMAL},item:{color:s.ThemeColorMap.TEXT_MUTED}});var _=(h=/*@__PURE__*/e(f).name,window.enmity.patcher.create(h));y=b(b({},/*@__PURE__*/e(f)),{patches:[],onStart:function(){var o,n,t,r;return o=this,n=void 0,t=void 0,r=function(){var o,n,t,r,l,a,i,s,m;return p(this,function(d){switch(d.label){case 0:if(d.trys.push([0,4,,5]),!(null===(i=g.getCurrentUser())||void 0===i?void 0:i.id))return console.error("[".concat(/*@__PURE__*/e(f).name,"] Error: Current user not initialized.")),[2];if(!(u.getItem&&u.setItem))return console.error("[".concat(/*@__PURE__*/e(f).name,"] Error: No available storage method found.")),[2];return[4,u.getItem("NoDeleteLogs")];case 1:if(d.sent())return[3,3];return[4,u.setItem("NoDeleteLogs","[]")];case 2:d.sent(),d.label=3;case 3:if(o=c("_currentDispatchActionType","_subscriptions","_actionHandlers","_waitQueue"),n=c("getMessage","getMessages"),t=c("getChannel","getDMFromUserId"),!o||!n||!t)return console.error("[".concat(/*@__PURE__*/e(f).name,"] Error: Necessary modules not found.")),[2];return(r=null===(m=null===(s=o._actionHandlers)||void 0===s?void 0:s._orderedActionHandlers)||void 0===m?void 0:m.MESSAGE_DELETE)?(l=r.find(function(e){return"MessageStore"===e.name}))?_.before(l,"actionHandler",function(e,t){var r=n.getMessage(t[0].channelId,t[0].id);if(r&&r.content){var l=b(b({},r),{content:'<span style="color:red;">[Deleted] '.concat(r.content,"</span>")});o.dispatch({type:"MESSAGE_UPDATE",message:l})}}):console.error("[".concat(/*@__PURE__*/e(f).name,"] Error: MessageStore handler not found.")):console.error("[".concat(/*@__PURE__*/e(f).name,"] Error: MESSAGE_DELETE handlers not found.")),console.log("[".concat(/*@__PURE__*/e(f).name,"] Plugin started successfully.")),[3,5];case 4:return a=d.sent(),console.error("[".concat(/*@__PURE__*/e(f).name,"] Plugin Error: ").concat(a.message)),[3,5];case 5:return[2]}})},new(t||(t=Promise))(function(e,l){function a(e){try{c(r.next(e))}catch(e){l(e)}}function i(e){try{c(r.throw(e))}catch(e){l(e)}}function c(o){var n;o.done?e(o.value):((n=o.value)instanceof t?n:new t(function(e){e(n)})).then(a,i)}c((r=r.apply(o,n||[])).next())})},onStop:function(){try{_.unpatchAll(),console.log("[".concat(/*@__PURE__*/e(f).name,"] Plugin stopped."))}catch(o){console.error("[".concat(/*@__PURE__*/e(f).name,"] Plugin Stop Error: ").concat(o.message))}},getSettingsPanel:function(e){var n=e.settings;return m.createElement(a,{title:"Plugin Settings"},m.createElement(l,{label:"Log bot messages",subLabel:"Whether or not bot message events should be logged",trailing:m.createElement(i,{value:n.getBoolean("_nodelete_logBots",!1),onValueChange:function(){try{n.toggle("_nodelete_logBots",!1),o("_nodelete","_logBots",n.getBoolean("_nodelete_logBots",!1)),d.open({content:"Log bot messages has been ".concat(n.getBoolean("_nodelete_logBots",!1)?"enabled":"disabled",".")})}catch(e){console.error("[ NoDelete Toggle Error ]",e),d.open({content:"An error occurred. Check debug logs for more info."})}}})}),m.createElement(t,null),m.createElement(l,{label:"Log my own messages",subLabel:"Whether or not your own edits and deleted messages will be logged",trailing:m.createElement(i,{value:n.getBoolean("_nodelete_logSelf",!1),onValueChange:function(){try{n.toggle("_nodelete_logSelf",!1),o("_nodelete","_logSelf",n.getBoolean("_nodelete_logSelf",!1)),d.open({content:"Log my own messages has been ".concat(n.getBoolean("_nodelete_logSelf",!1)?"enabled":"disabled",".")})}catch(e){console.error("[ NoDelete Toggle Error ]",e),d.open({content:"An error occurred. Check debug logs for more info."})}}})}),m.createElement(t,null),m.createElement(l,{label:"Only log to Storage",subLabel:"Message logs will not show in chat, only in Storage",trailing:m.createElement(i,{value:n.getBoolean("_nodelete",!1),onValueChange:function(){try{n.toggle("_nodelete",!1),o("_nodelete","_storageLog",n.getBoolean("_nodelete",!1)),d.open({content:"Storage-only logging has been ".concat(n.getBoolean("_nodelete",!1)?"enabled":"disabled",".")})}catch(e){console.error("[ NoDelete Toggle Error ]",e),d.open({content:"An error occurred. Check debug logs for more info."})}}})}),m.createElement(t,null),m.createElement(r,{value:n.getBoolean("_nodelete_maxLogs","1000"),onChange:function(e){return/^\d+$/.test(e)?o("_nodelete","maxLogs",e.trim()):o("_nodelete","maxLogs","1000")},title:"Max Logs to Store"}),m.createElement(l,{label:"Auto-clear logs",subLabel:"Message logs will automatically clear after they have exceeded your max logs limit",trailing:m.createElement(i,{value:n.getBoolean("_nodelete_autoClear",!1),onValueChange:function(){try{n.toggle("_nodelete_autoClear",!1),o("_nodelete","autoClear",n.getBoolean("_nodelete_autoClear",!1)),d.open({content:"Auto-clear logs has been ".concat(n.getBoolean("_nodelete_autoClear",!1)?"enabled":"disabled",".")})}catch(e){console.error("[ NoDelete Toggle Error ]",e),d.open({content:"An error occurred. Check debug logs for more info."})}}})}))}}),window.enmity.plugins.registerPlugin(y)})();
//# sourceMappingURL=index.js.map
